create table T_FLUJO_TRANSICIONES
(
  id_transicion   NUMBER generated by default on null as identity(
    minvalue 1
    nomaxvalue
    start with 1
    increment by 1
    nocache
    nocycle
  ),
  id_paso_origen  NUMBER not null,
  id_paso_destino NUMBER not null,
  condicion       VARCHAR2(2000),
  accion          VARCHAR2(50) default 'APROBAR' not null
)
;
comment on table T_FLUJO_TRANSICIONES
  is 'Transiciones entre Pasos de Flujo según condiciones';
comment on column T_FLUJO_TRANSICIONES.id_transicion
  is 'Identificador de la transición del flujo';
comment on column T_FLUJO_TRANSICIONES.id_paso_origen
  is 'Identificador del paso origen del flujo';
comment on column T_FLUJO_TRANSICIONES.id_paso_destino
  is 'Identificador del paso destino del flujo';
comment on column T_FLUJO_TRANSICIONES.condicion
  is 'Condición de la transición. Soporta enlace de variables de instancia con el formato ":variable". Ejemplo: :monto, :id_cliente, etc.';
comment on column T_FLUJO_TRANSICIONES.accion
  is 'Acción en el paso origen que lleva al paso destino del flujo';
alter table T_FLUJO_TRANSICIONES
  add constraint PK_FLUJO_TRANSICIONES primary key (ID_TRANSICION);
alter table T_FLUJO_TRANSICIONES
  add constraint FK_FLUJO_TRANSICIONES_PASOS_DESTINO foreign key (ID_PASO_DESTINO)
  references T_FLUJO_PASOS (ID_PASO);
alter table T_FLUJO_TRANSICIONES
  add constraint FK_FLUJO_TRANSICIONES_PASOS_ORIGEN foreign key (ID_PASO_ORIGEN)
  references T_FLUJO_PASOS (ID_PASO);
