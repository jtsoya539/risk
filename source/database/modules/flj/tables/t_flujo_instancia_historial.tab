-- Create table
create table T_FLUJO_INSTANCIA_HISTORIAL
(
  id_historial NUMBER generated by default on null as identity(
    minvalue 1
    nomaxvalue
    start with 1
    increment by 1
    nocache
    nocycle
  ),
  id_instancia NUMBER not null,
  id_paso      NUMBER not null,
  accion       VARCHAR2(100),
  usuario      VARCHAR2(100),
  comentario   VARCHAR2(1000),
  fecha        TIMESTAMP(2) WITH TIME ZONE default CURRENT_TIMESTAMP not null
)
;
comment on table T_FLUJO_INSTANCIA_HISTORIAL
  is 'Historial de Instancias de Flujos';
comment on column T_FLUJO_INSTANCIA_HISTORIAL.id_historial
  is 'Identificador del historial de la instancia';
comment on column T_FLUJO_INSTANCIA_HISTORIAL.id_instancia
  is 'Identificador de la instancia';
comment on column T_FLUJO_INSTANCIA_HISTORIAL.id_paso
  is 'Identificador del paso de la instancia';
comment on column T_FLUJO_INSTANCIA_HISTORIAL.accion
  is 'Acción realizada';
comment on column T_FLUJO_INSTANCIA_HISTORIAL.usuario
  is 'Usuario que realiza la acción';
comment on column T_FLUJO_INSTANCIA_HISTORIAL.comentario
  is 'Comentario realizado';
comment on column T_FLUJO_INSTANCIA_HISTORIAL.fecha
  is 'Fecha del historial';
alter table T_FLUJO_INSTANCIA_HISTORIAL
  add constraint PK_FLUJO_INSTANCIA_HISTORIAL primary key (ID_HISTORIAL);
alter table T_FLUJO_INSTANCIA_HISTORIAL
  add constraint FK_FLUJO_INSTANCIA_HISTORIAL_INSTANCIAS foreign key (ID_INSTANCIA)
  references T_FLUJO_INSTANCIAS (ID_INSTANCIA);
alter table T_FLUJO_INSTANCIA_HISTORIAL
  add constraint FK_FLUJO_INSTANCIA_HISTORIAL_PASOS foreign key (ID_PASO)
  references T_FLUJO_PASOS (ID_PASO);
