create table T_FLUJO_INSTANCIA_APROBACIONES
(
  id_aprobacion      NUMBER generated by default on null as identity(
    minvalue 1
    nomaxvalue
    start with 1
    increment by 1
    nocache
    nocycle
  ),
  id_paso_instancia NUMBER not null,
  usuario_aprobador VARCHAR2(100) not null,
  aprobado          CHAR(1) default 'N' not null,
  fecha_aprobacion  TIMESTAMP(2) WITH TIME ZONE default CURRENT_TIMESTAMP,
  comentario        VARCHAR2(1000),
  rol_aprobador     VARCHAR2(100)
)
;
comment on table T_FLUJO_INSTANCIA_APROBACIONES
  is 'Aprobaciones de Instancias de Flujos';
comment on column T_FLUJO_INSTANCIA_APROBACIONES.id_aprobacion
  is 'Identificador de la aprobación del paso de la instancia';
comment on column T_FLUJO_INSTANCIA_APROBACIONES.id_paso_instancia
  is 'Identificador del paso de la instancia';
comment on column T_FLUJO_INSTANCIA_APROBACIONES.usuario_aprobador
  is 'Usuario aprobador del paso de la instancia';
comment on column T_FLUJO_INSTANCIA_APROBACIONES.aprobado
  is 'Aprobado (S/N)';
comment on column T_FLUJO_INSTANCIA_APROBACIONES.fecha_aprobacion
  is 'Fecha de aprobación';
comment on column T_FLUJO_INSTANCIA_APROBACIONES.comentario
  is 'Comentario de aprobación';
comment on column T_FLUJO_INSTANCIA_APROBACIONES.rol_aprobador
  is 'Nombre de roles del usuario aprobador. En formato JSON Array';
alter table T_FLUJO_INSTANCIA_APROBACIONES
  add constraint PK_FLJ_INST_APROBACIONES primary key (ID_APROBACION);
alter table T_FLUJO_INSTANCIA_APROBACIONES
  add constraint FK_FLJ_INST_APROBACIONES_PASOS foreign key (ID_PASO_INSTANCIA)
  references T_FLUJO_INSTANCIA_PASOS (ID_PASO_INSTANCIA);
alter table T_FLUJO_INSTANCIA_APROBACIONES
  add constraint CK_FLJ_INST_APROBACIONES_APROBADO
  check (aprobado IN ('S','N'));
